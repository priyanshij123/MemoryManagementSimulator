TEST RESULTS â€“ Memory Management and Cache Simulator
===================================================

Enter L1 cache size, block size, associativity: 64 16 2
Enter L2 cache size, block size, associativity: 256 16 4

Test 1: Initialize memory
-------------------------
Command:
> init memory 1024

Output:
Initialized memory with size 1024 bytes

Fragmentation steps:
--------------------
Command:
> malloc 100
> malloc 200
> malloc 80
> malloc 10
> free 1
> free 3
> dump memory

Output:
[0x0000 - 0x0063] FREE
[0x0064 - 0x012b] USED (id=2)
[0x012c - 0x017b] FREE
[0x017c - 0x0185] USED (id=4)
[0x0186 - 0x03ff] FREE

Test 2: First Fit Allocation
----------------------------
Command:
> set allocator first_fit
> malloc 70

Output:
Allocated block id=5 at address=0x0000

> dump memory

Output:
[0x0000 - 0x0045] USED (id=5)
[0x0046 - 0x0063] FREE
[0x0064 - 0x012b] USED (id=2)
[0x012c - 0x017b] FREE
[0x017c - 0x0185] USED (id=4)
[0x0186 - 0x03ff] FREE

[The first block from start which is large enough to allocate 70 bytes is assigned]

Test 3: Free and Coalescing
---------------------------
Command:
> free 2
> dump memory

Output:
[0x0000 - 0x0045] USED (id=5)
[0x0046 - 0x017b] FREE
[0x017c - 0x0185] USED (id=4)
[0x0186 - 0x03ff] FREE

[When ID 2 was freed it merges with adjacent free blocks]

Test 4: Best Fit Allocation
---------------------------
(Initialize memory and repeat fragmentation steps)

Command:
> set allocator best_fit
> malloc 70

Output:
Allocated block id=5 at address=0x012c

> dump memory

Output:
[0x0000 - 0x0063] FREE
[0x0064 - 0x012b] USED (id=2)
[0x012c - 0x0171] USED (id=5)
[0x0172 - 0x017b] FREE
[0x017c - 0x0185] USED (id=4)
[0x0186 - 0x03ff] FREE

[The smallest free block which can accomodate 70 bytes is assigned with ID 5]

Test 5: Worst Fit Allocation
----------------------------
Command:
> free 5
> set allocator worst_fit
> malloc 70

Output:
Allocated block id=6 at address=0x0186

> dump memory

Output:
[0x0000 - 0x0063] FREE
[0x0064 - 0x012b] USED (id=2)
[0x012c - 0x017b] FREE
[0x017c - 0x0185] USED (id=4)
[0x0186 - 0x01cb] USED (id=6)
[0x01cc - 0x03ff] FREE

[The largest free block gets assigned]

Test 6: Memory Statistics
-------------------------
Command:
> stats

Output:
Total memory: 1024
Used memory: 280
Memory utilization: 27.3438%
Internal fragmentation: 3500 bytes
External fragmentation: 17.5781%
Allocation success rate: 100%


Test 7: Cache Access (L1 & L2)
------------------------------

Command:
> access 0
> access 16
> access 32
> access 48
> access 0
> access 64
> access 0

Output:
> access 0
L1 MISS
L2 MISS -> Main Memory

[When address is accessed for the first time it results into miss
Then the corresponding 16 addresses gets stored in both caches in particular set which they are mapped into]

> access 16
L1 MISS
L2 MISS -> Main Memory

> access 32
L1 MISS
L2 MISS -> Main Memory

> access 48
L1 MISS
L2 MISS -> Main Memory

> access 0
L1 HIT

[accessing for second time results in L1 HIT, it does not move further to L2]

> access 64
L1 MISS
L2 MISS -> Main Memory

[since L1 gets full FIFO replacement happens , address 0 gets removed from L1]

> access 0
L1 MISS
L2 HIT

Command:
> exit
to exit the program


